# TestBro.ai Environment Configuration
# Copy this file to .env and update the values for your environment

# ==============================================
# CORE APPLICATION SETTINGS
# ==============================================

# Environment (development, staging, production)
NODE_ENV=production

# Application URLs
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

# Supabase Configuration (Primary Database)
SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
SUPABASE_ANON_KEY=your_supabase_anon_key

# PostgreSQL Configuration (if using local PostgreSQL)
POSTGRES_PASSWORD=testbro_secure_password_change_me
POSTGRES_USER=testbro
POSTGRES_DB=testbro

# ==============================================
# REDIS CONFIGURATION
# ==============================================

REDIS_PASSWORD=testbro_redis_password_change_me
REDIS_HOST=redis
REDIS_PORT=6379

# ==============================================
# AUTHENTICATION & SECURITY
# ==============================================

# JWT Secrets (CHANGE THESE IN PRODUCTION!)
JWT_SECRET=your_super_secure_jwt_secret_key_minimum_32_characters_change_in_production
JWT_REFRESH_SECRET=your_super_secure_refresh_secret_minimum_32_characters_change_in_production

# Session Secret
SESSION_SECRET=your_session_secret_minimum_32_characters_change_in_production

# ==============================================
# AI SERVICES
# ==============================================

# OpenRouter API Key for AI features
OPENROUTER_KEY=your_openrouter_api_key

# OpenAI API Key (alternative)
OPENAI_API_KEY=your_openai_api_key

# ==============================================
# EMAIL CONFIGURATION
# ==============================================

# SMTP Settings for notifications and alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
EMAIL_FROM=noreply@testbro.ai

# ==============================================
# MONITORING & OBSERVABILITY
# ==============================================

# APM Services (optional)
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=TestBro Backend

# Sentry Error Tracking
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=production

# Datadog APM
DD_API_KEY=your_datadog_api_key
DD_SERVICE=testbro-backend

# Elastic APM
ELASTIC_APM_SERVER_URL=your_elastic_apm_url
ELASTIC_APM_SECRET_TOKEN=your_elastic_secret_token

# ==============================================
# LOGGING CONFIGURATION
# ==============================================

# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# Error Tracking Sample Rate (0.0 to 1.0)
ERROR_SAMPLE_RATE=1.0

# APM Sample Rate (0.0 to 1.0)
APM_SAMPLE_RATE=0.1

# ==============================================
# MONITORING TOOLS
# ==============================================

# Grafana Admin Password
GRAFANA_PASSWORD=admin_change_me

# Prometheus Configuration
PROMETHEUS_RETENTION=15d

# ==============================================
# SECURITY CONFIGURATION
# ==============================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://testbro.ai

# ==============================================
# FILE UPLOAD CONFIGURATION
# ==============================================

# Maximum file upload size (in bytes)
MAX_FILE_SIZE=10485760

# Upload directory
UPLOAD_DIR=./uploads

# ==============================================
# FEATURE FLAGS
# ==============================================

# Enable/disable features
ENABLE_WEBSOCKETS=true
ENABLE_METRICS=true
ENABLE_APM=true
ENABLE_ERROR_TRACKING=true
ENABLE_EMAIL_NOTIFICATIONS=true

# ==============================================
# DEVELOPMENT SETTINGS
# ==============================================

# Development mode settings (only for development)
DEV_ENABLE_CORS=true
DEV_ENABLE_LOGGING=true
DEV_SKIP_AUTH=false

# ==============================================
# PERFORMANCE TUNING
# ==============================================

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=4096

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=20

# Cache TTL (seconds)
CACHE_TTL=3600

# ==============================================
# BACKUP CONFIGURATION
# ==============================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your_backup_bucket
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=your_s3_access_key
BACKUP_S3_SECRET_KEY=your_s3_secret_key

# ==============================================
# SSL/TLS CONFIGURATION
# ==============================================

# SSL Certificate paths (for production)
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/private-key.pem
SSL_CA_PATH=/path/to/ca-chain.pem

# ==============================================
# CONTAINER SPECIFIC
# ==============================================

# Docker-specific settings
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Health check intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Frontend Environment Variables (.env)
# Copy this to testbro-frontend/.env and update with your actual values

VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
VITE_API_URL=http://localhost:3000

# Backend Environment Variables (.env)
# Copy this to testbro-backend/.env and update with your actual values

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
OPENROUTER_KEY=your-openrouter-api-key
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
NODE_ENV=development
PORT=3000
JWT_SECRET=your-jwt-secret

# Optional: Database Configuration
DB_POOL_MAX=20
DB_POOL_MIN=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=60000
DB_QUERY_TIMEOUT=30000
DB_SLOW_QUERY_THRESHOLD=1000

# Optional: Cache Configuration
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=900

# Optional: Monitoring Configuration
DB_MONITORING_ENABLED=true
DB_MONITORING_INTERVAL=60000
